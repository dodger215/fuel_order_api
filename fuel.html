<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Fuelease Ghana - Professional fuel delivery and roadside assistance services across Greater Accra. Order fuel, emergency services, and vehicle maintenance 24/7.">
    <meta name="keywords" content="fuel delivery ghana, roadside assistance accra, mobile fuel, ghana petroleum, emergency services">
    <title>Fuelease Ghana - Mobile App</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        :root {
            --primary-color: #1e40af;
            --secondary-color: #3b82f6;
            --accent-color: #f59e0b;
            --success-color: #10b981;
            --danger-color: #ef4444;
            --warning-color: #f59e0b;
            --dark-color: #1f2937;
            --light-color: #f8fafc;
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --shadow: 0 8px 32px rgba(0,0,0,0.1);
            --ghana-red: #ce1126;
            --ghana-gold: #fcd116;
            --ghana-green: #006b3f;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--ghana-green) 0%, var(--ghana-gold) 50%, var(--ghana-red) 100%);
            min-height: 100vh;
            color: var(--dark-color);
            overflow-x: hidden;
            position: relative;
        }

        /* Splash Screen */
        .splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--ghana-green) 0%, var(--ghana-gold) 50%, var(--ghana-red) 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }

        .splash-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .splash-logo {
            color: white;
            font-size: 3rem;
            font-weight: bold;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .splash-logo i {
            color: var(--accent-color);
            animation: pulse 2s infinite;
        }

        .ghana-flag {
            font-size: 1.2rem;
            margin-bottom: 1rem;
        }

        .maintenance-loader {
            display: flex;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .tool-icon {
            font-size: 2.5rem;
            color: var(--ghana-gold);
            animation: spin 2s linear infinite;
            filter: drop-shadow(0 0 10px rgba(252, 209, 22, 0.5));
        }

        .tool-icon:nth-child(2) {
            animation-delay: 0.3s;
        }

        .tool-icon:nth-child(3) {
            animation-delay: 0.6s;
        }

        .tool-icon:nth-child(4) {
            animation-delay: 0.9s;
        }

        .tool-icon:nth-child(5) {
            animation-delay: 1.2s;
        }

        .loading-text {
            color: white;
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
            opacity: 0.9;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        .ghana-text {
            color: var(--ghana-gold);
            font-size: 1rem;
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .loading-dots {
            color: var(--ghana-gold);
            font-size: 1.5rem;
            animation: dots 1.5s infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes dots {
            0%, 20% { content: '.'; }
            40% { content: '..'; }
            60%, 100% { content: '...'; }
        }

        /* Mobile App Container */
        .mobile-app {
            max-width: 414px;
            margin: 0 auto;
            min-height: 100vh;
            background: transparent;
            position: relative;
            display: none;
        }

        .mobile-app.active {
            display: block;
        }

        /* Status Bar */
        .status-bar {
            height: 44px;
            background: rgba(0,0,0,0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            color: white;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .status-left {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .status-right {
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        /* Header */
        .mobile-header {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--glass-border);
            padding: 1rem 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .header-logo i {
            color: var(--ghana-gold);
        }

        .header-subtitle {
            font-size: 0.7rem;
            color: rgba(255,255,255,0.8);
            font-weight: normal;
        }

        .header-actions {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .header-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .header-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.1);
        }

        /* Main Content */
        .mobile-content {
            padding: 0 0 100px 0;
            min-height: calc(100vh - 144px);
        }

        /* Welcome Banner */
        .welcome-banner {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            margin: 20px;
            border-radius: 20px;
            padding: 1.5rem;
            text-align: center;
            box-shadow: var(--shadow);
        }

        .welcome-banner h2 {
            color: white;
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
        }

        .welcome-banner p {
            color: rgba(255,255,255,0.8);
            font-size: 0.9rem;
        }

        /* Quick Actions */
        .quick-actions {
            padding: 0 20px 20px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .quick-action-card {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: var(--shadow);
        }

        .quick-action-card:active {
            transform: scale(0.95);
        }

        .quick-action-card i {
            font-size: 2.5rem;
            color: var(--ghana-gold);
            margin-bottom: 1rem;
        }

        .quick-action-card h3 {
            color: white;
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
        }

        .quick-action-card p {
            color: rgba(255,255,255,0.8);
            font-size: 0.9rem;
        }

        .price-tag-header {
            background: var(--ghana-gold);
            color: var(--dark-color);
            padding: 0.3rem 0.8rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-top: 0.5rem;
        }

        /* Services Grid */
        .services-section {
            padding: 0 20px 20px;
        }

        .section-title {
            color: white;
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        .services-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
        }

        .service-item {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 1rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: var(--shadow);
        }

        .service-item:active {
            transform: scale(0.95);
        }

        .service-item i {
            font-size: 1.8rem;
            color: var(--ghana-gold);
            margin-bottom: 0.5rem;
        }

        .service-item span {
            color: white;
            font-size: 0.9rem;
            display: block;
        }

        /* Fuel Order Form */
        .fuel-order-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            display: none;
            align-items: flex-end;
        }

        .fuel-order-modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            width: 100%;
            max-height: 80%;
            border-radius: 20px 20px 0 0;
            padding: 20px;
            transform: translateY(100%);
            transition: transform 0.3s ease;
            overflow-y: auto;
        }

        .fuel-order-modal.active .modal-content {
            transform: translateY(0);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--dark-color);
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--dark-color);
            cursor: pointer;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--dark-color);
            font-weight: 600;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 1rem;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--ghana-green);
        }

        .fuel-options {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-top: 0.5rem;
        }

        .fuel-option {
            background: #f8fafc;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 1rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .fuel-option.selected {
            border-color: var(--ghana-gold);
            background: #fef3c7;
        }

        .fuel-option h4 {
            color: var(--dark-color);
            margin-bottom: 0.5rem;
        }

        .fuel-option .price {
            color: var(--ghana-green);
            font-weight: bold;
            font-size: 1.1rem;
        }

        /* Nearby Stations */
        .stations-section {
            padding: 0 20px 20px;
        }

        .station-card {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 1rem;
            margin-bottom: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: var(--shadow);
        }

        .station-card:active {
            transform: scale(0.98);
        }

        .station-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .station-name {
            color: white;
            font-weight: bold;
            font-size: 1.1rem;
        }

        .station-distance {
            color: var(--ghana-gold);
            font-size: 0.9rem;
            background: rgba(252, 209, 22, 0.2);
            padding: 0.2rem 0.5rem;
            border-radius: 8px;
        }

        .station-address {
            color: rgba(255,255,255,0.8);
            font-size: 0.9rem;
            margin-bottom: 0.8rem;
        }

        .station-prices {
            display: flex;
            justify-content: space-between;
            font-size: 0.85rem;
        }

        .price-tag {
            background: rgba(255,255,255,0.2);
            color: white;
            padding: 0.3rem 0.6rem;
            border-radius: 8px;
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 414px;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border-top: 1px solid var(--glass-border);
            display: flex;
            justify-content: space-around;
            padding: 15px 0;
            z-index: 100;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.3rem;
            color: rgba(255,255,255,0.7);
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 60px;
        }

        .nav-item.active {
            color: var(--ghana-gold);
        }

        .nav-item i {
            font-size: 1.3rem;
        }

        .nav-item span {
            font-size: 0.7rem;
        }

        /* Emergency Modal */
        .emergency-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(239, 68, 68, 0.95);
            z-index: 2000;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .emergency-modal.active {
            display: flex;
        }

        .emergency-content {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            text-align: center;
            max-width: 300px;
            width: 100%;
        }

        .emergency-icon {
            font-size: 4rem;
            color: var(--danger-color);
            margin-bottom: 1rem;
            animation: pulse 1s infinite;
        }

        .emergency-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--dark-color);
            margin-bottom: 1rem;
        }

        .emergency-actions {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        /* Buttons */
        .btn {
            padding: 1rem 1.5rem;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .btn:active {
            transform: scale(0.95);
        }

        .btn-primary {
            background: var(--ghana-green);
            color: white;
        }

        .btn-accent {
            background: var(--ghana-gold);
            color: var(--dark-color);
        }

        .btn-danger {
            background: var(--danger-color);
            color: white;
        }

        .btn-success {
            background: var(--success-color);
            color: white;
        }

        .btn-secondary {
            background: #6b7280;
            color: white;
        }

        /* Tracking Modal */
        .tracking-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1500;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .tracking-modal.active {
            display: flex;
        }

        .tracking-content {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            width: 100%;
            max-width: 350px;
        }

        .tracking-steps {
            margin: 2rem 0;
        }

        .tracking-step {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.8rem 0;
            position: relative;
        }

        .tracking-step::after {
            content: '';
            position: absolute;
            left: 20px;
            top: 50px;
            width: 2px;
            height: 30px;
            background: #e5e7eb;
        }

        .tracking-step:last-child::after {
            display: none;
        }

        .tracking-step.completed::after {
            background: var(--success-color);
        }

        .step-indicator {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            flex-shrink: 0;
        }

        .tracking-step.completed .step-indicator {
            background: var(--success-color);
        }

        .tracking-step.active .step-indicator {
            background: var(--ghana-gold);
        }

        .step-info h4 {
            color: var(--dark-color);
            margin-bottom: 0.2rem;
        }

        .step-info p {
            color: #6b7280;
            font-size: 0.9rem;
        }

        .driver-info {
            background: #f8fafc;
            border-radius: 12px;
            padding: 1rem;
            margin: 1rem 0;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .driver-avatar {
            width: 50px;
            height: 50px;
            background: var(--ghana-gold);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--dark-color);
            font-weight: bold;
        }

        .driver-details h4 {
            color: var(--dark-color);
            margin-bottom: 0.2rem;
        }

        .driver-details p {
            color: #6b7280;
            font-size: 0.9rem;
        }

        .eta-display {
            text-align: center;
            background: #fef3c7;
            border-radius: 12px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .eta-time {
            font-size: 2rem;
            color: var(--ghana-green);
            font-weight: bold;
        }

        .eta-label {
            color: var(--dark-color);
            margin-top: 0.5rem;
        }

        /* Notifications */
        .notification {
            position: fixed;
            top: 60px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            padding: 1rem 1.5rem;
            color: white;
            z-index: 3000;
            transform: translateX(-50%) translateY(-100px);
            transition: transform 0.3s ease;
            max-width: 90%;
        }

        .notification.show {
            transform: translateX(-50%) translateY(0);
        }

        .notification.success {
            border-left: 4px solid var(--success-color);
        }

        .notification.error {
            border-left: 4px solid var(--danger-color);
        }

        /* Loading Spinner */
        .loading-spinner {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2500;
            justify-content: center;
            align-items: center;
        }

        .loading-spinner.active {
            display: flex;
        }

        .spinner-content {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            text-align: center;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid #e5e7eb;
            border-top: 4px solid var(--ghana-gold);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        /* Currency indicator */
        .currency {
            color: var(--ghana-green);
            font-weight: bold;
        }

        /* Map Styling */
        .map-container {
            position: relative;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: var(--shadow);
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
        }

        .map-controls {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            z-index: 10;
        }

        .map-control-btn {
            width: 40px;
            height: 40px;
            background: white;
            border: none;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }

        .map-control-btn:hover {
            background: #f3f4f6;
            transform: scale(1.1);
        }

        .map-control-btn i {
            color: var(--dark-color);
            font-size: 1rem;
        }

        .section-subtitle {
            color: white;
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        /* Custom Google Maps Info Window */
        .gm-ui-hover-effect {
            background-color: var(--ghana-gold) !important;
        }

        .gm-style .gm-style-iw-c {
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }

        .gm-style .gm-style-iw-d {
            overflow: hidden;
        }

        /* Map loading placeholder */
        .map-loading {
            width: 100%;
            height: 300px;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.1rem;
            flex-direction: column;
            gap: 1rem;
        }

        .map-loading i {
            font-size: 2rem;
            color: var(--ghana-gold);
            animation: spin 2s linear infinite;
        }

        /* Responsive adjustments */
        @media (max-width: 414px) {
            .mobile-app {
                max-width: 100%;
            }

            .bottom-nav {
                max-width: 100%;
            }

            .map-controls {
                top: 8px;
                right: 8px;
            }

            .map-control-btn {
                width: 35px;
                height: 35px;
            }
        }
    </style>
</head>
<body>
    <!-- Splash Screen -->
    <div class="splash-screen" id="splashScreen">
        <div class="splash-logo">
            <i class="fas fa-gas-pump"></i>
            Fuelease Ghana
        </div>
        <div class="ghana-flag">üá¨üá≠</div>
        <div class="ghana-text">Professional Fuel & Roadside Services</div>
        <div class="maintenance-loader">
            <i class="fas fa-wrench tool-icon"></i>
            <i class="fas fa-screwdriver tool-icon"></i>
            <i class="fas fa-hammer tool-icon"></i>
            <i class="fas fa-cog tool-icon"></i>
            <i class="fas fa-tools tool-icon"></i>
        </div>
        <div class="loading-text">Initializing Services</div>
        <div class="loading-dots"></div>
    </div>

    <!-- Mobile App -->
    <div class="mobile-app" id="mobileApp">
        <!-- Status Bar -->
        

        <!-- Header -->
        <div class="mobile-header">
            <div>
                <div class="header-logo">
                    <i class="fas fa-gas-pump"></i>
                    Fuelease Ghana
                </div>
                <div class="header-subtitle">Serving Greater Accra Region</div>
            </div>
            <div class="header-actions">
                <button class="header-btn" onclick="showNotification('Notifications coming soon!', 'success')">
                    <i class="fas fa-bell"></i>
                </button>
                <button class="header-btn" onclick="showProfile()">
                    <i class="fas fa-user"></i>
                </button>
            </div>
        </div>

        <!-- Main Content -->
        <div class="mobile-content">
            <!-- Welcome Banner -->
            <div class="welcome-banner">
                <h2>Akwaaba! üá¨üá≠</h2>
                <p>Ghana's #1 fuel delivery and roadside assistance service. Available 24/7 across Greater Accra.</p>
            </div>

            <!-- Quick Actions -->
            <div class="quick-actions">
                <div class="quick-action-card" onclick="showFuelOrder()">
                    <i class="fas fa-gas-pump"></i>
                    <h3>Order Fuel</h3>
                    <p>Fast delivery across Accra</p>
                    <div class="price-tag-header">From ‚Çµ12.50/L</div>
                </div>
                <div class="quick-action-card" onclick="showEmergency()">
                    <i class="fas fa-exclamation-triangle"></i>
                    <h3>Emergency</h3>
                    <p>24/7 roadside assistance</p>
                    <div class="price-tag-header">Call 999</div>
                </div>
            </div>

            <!-- Services Section -->
            <div class="services-section">
                <h2 class="section-title">
                    <i class="fas fa-tools"></i>
                    Our Services
                </h2>
                <div class="services-grid">
                    <div class="service-item" onclick="requestService('towing')">
                        <i class="fas fa-truck"></i>
                        <span>Towing</span>
                    </div>
                    <div class="service-item" onclick="requestService('jumpstart')">
                        <i class="fas fa-car-battery"></i>
                        <span>Jump Start</span>
                    </div>
                    <div class="service-item" onclick="requestService('lockout')">
                        <i class="fas fa-key"></i>
                        <span>Lockout Help</span>
                    </div>
                    <div class="service-item" onclick="requestService('tire')">
                        <i class="fas fa-life-ring"></i>
                        <span>Tyre Service</span>
                    </div>
                    <div class="service-item" onclick="requestService('repair')">
                        <i class="fas fa-wrench"></i>
                        <span>Minor Repair</span>
                    </div>
                    <div class="service-item" onclick="requestService('winch')">
                        <i class="fas fa-anchor"></i>
                        <span>Winch Out</span>
                    </div>
                </div>
            </div>

            <!-- Interactive Map -->
            <div class="stations-section">
                <h2 class="section-title">
                    <i class="fas fa-map"></i>
                    Live Map & Nearby Stations
                </h2>
                <div class="map-container" style="margin-bottom: 1rem;">
                    <div id="ghanaMap" style="width: 100%; height: 300px; border-radius: 16px; overflow: hidden;">
                        <div class="map-loading">
                            <i class="fas fa-map-marked-alt"></i>
                            <span>Loading Ghana Map...</span>
                        </div>
                    </div>
                    <div class="map-controls">
                        <button class="map-control-btn" onclick="centerOnUser()" title="Center on your location">
                            <i class="fas fa-crosshairs"></i>
                        </button>
                        <button class="map-control-btn" onclick="toggleTraffic()" title="Toggle traffic">
                            <i class="fas fa-road"></i>
                        </button>
                    </div>
                </div>
                
                <h3 class="section-subtitle">
                    <i class="fas fa-gas-pump"></i>
                    Fuel Stations List
                </h3>
                <div class="station-card" onclick="selectStation('Shell Ghana')">
                    <div class="station-header">
                        <div class="station-name">Shell Ghana</div>
                        <div class="station-distance">0.5 km</div>
                    </div>
                    <div class="station-address">Ring Road Central, Accra</div>
                    <div class="station-prices">
                        <span class="price-tag">Regular: ‚Çµ12.50</span>
                        <span class="price-tag">Premium: ‚Çµ14.80</span>
                        <span class="price-tag">Diesel: ‚Çµ13.20</span>
                    </div>
                </div>

                <div class="station-card" onclick="selectStation('GOIL')">
                    <div class="station-header">
                        <div class="station-name">GOIL Station</div>
                        <div class="station-distance">0.8 km</div>
                    </div>
                    <div class="station-address">Labadi Road, East Legon</div>
                    <div class="station-prices">
                        <span class="price-tag">Regular: ‚Çµ12.30</span>
                        <span class="price-tag">Premium: ‚Çµ14.60</span>
                        <span class="price-tag">Diesel: ‚Çµ13.00</span>
                    </div>
                </div>

                <div class="station-card" onclick="selectStation('Total Energies')">
                    <div class="station-header">
                        <div class="station-name">Total Energies</div>
                        <div class="station-distance">1.2 km</div>
                    </div>
                    <div class="station-address">Osu Oxford Street, Accra</div>
                    <div class="station-prices">
                        <span class="price-tag">Regular: ‚Çµ12.70</span>
                        <span class="price-tag">Premium: ‚Çµ15.00</span>
                        <span class="price-tag">Diesel: ‚Çµ13.40</span>
                    </div>
                </div>

                <div class="station-card" onclick="selectStation('Allied Oil')">
                    <div class="station-header">
                        <div class="station-name">Allied Oil</div>
                        <div class="station-distance">1.5 km</div>
                    </div>
                    <div class="station-address">Spintex Road, Baatsonaa</div>
                    <div class="station-prices">
                        <span class="price-tag">Regular: ‚Çµ12.40</span>
                        <span class="price-tag">Premium: ‚Çµ14.70</span>
                        <span class="price-tag">Diesel: ‚Çµ13.10</span>
                    </div>
                </div>

                <div class="station-card" onclick="selectStation('Star Oil')">
                    <div class="station-header">
                        <div class="station-name">Star Oil</div>
                        <div class="station-distance">2.1 km</div>
                    </div>
                    <div class="station-address">Tema Station, Community 25</div>
                    <div class="station-prices">
                        <span class="price-tag">Regular: ‚Çµ12.60</span>
                        <span class="price-tag">Premium: ‚Çµ14.90</span>
                        <span class="price-tag">Diesel: ‚Çµ13.30</span>
                    </div>
                </div>

                <div class="station-card" onclick="selectStation('Frimps Oil')">
                    <div class="station-header">
                        <div class="station-name">Frimps Oil</div>
                        <div class="station-distance">2.8 km</div>
                    </div>
                    <div class="station-address">North Legon, University of Ghana</div>
                    <div class="station-prices">
                        <span class="price-tag">Regular: ‚Çµ12.45</span>
                        <span class="price-tag">Premium: ‚Çµ14.75</span>
                        <span class="price-tag">Diesel: ‚Çµ13.15</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <div class="bottom-nav">
            <div class="nav-item active" onclick="setActiveTab('home')">
                <i class="fas fa-home"></i>
                <span>Home</span>
            </div>
            <div class="nav-item" onclick="setActiveTab('fuel')">
                <i class="fas fa-gas-pump"></i>
                <span>Fuel</span>
            </div>
            <div class="nav-item" onclick="setActiveTab('track')">
                <i class="fas fa-route"></i>
                <span>Track</span>
            </div>
            <div class="nav-item" onclick="setActiveTab('emergency')">
                <i class="fas fa-exclamation-triangle"></i>
                <span>Emergency</span>
            </div>
            <div class="nav-item" onclick="setActiveTab('more')">
                <i class="fas fa-ellipsis-h"></i>
                <span>More</span>
            </div>
        </div>
    </div>

    <!-- Fuel Order Modal -->
    <div class="fuel-order-modal" id="fuelOrderModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Order Fuel Delivery</h2>
                <button class="close-btn" onclick="closeFuelOrder()">&times;</button>
            </div>
            <form id="fuelOrderForm">
                <div class="form-group">
                    <label for="location">Delivery Location</label>
                    <input type="text" id="location" placeholder="Enter address in Greater Accra" required>
                </div>
                
                <div class="form-group">
                    <label>Select Fuel Type</label>
                    <div class="fuel-options">
                        <div class="fuel-option" data-fuel="regular" onclick="selectFuel('regular')">
                            <h4>Regular</h4>
                            <div class="price">‚Çµ12.50/L</div>
                        </div>
                        <div class="fuel-option" data-fuel="premium" onclick="selectFuel('premium')">
                            <h4>Premium</h4>
                            <div class="price">‚Çµ14.80/L</div>
                        </div>
                        <div class="fuel-option" data-fuel="diesel" onclick="selectFuel('diesel')">
                            <h4>Diesel</h4>
                            <div class="price">‚Çµ13.20/L</div>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="quantity">Quantity (Litres)</label>
                    <select id="quantity" required>
                        <option value="">Select quantity</option>
                        <option value="10">10 Litres</option>
                        <option value="20">20 Litres</option>
                        <option value="30">30 Litres</option>
                        <option value="40">40 Litres</option>
                        <option value="50">50 Litres</option>
                        <option value="60">60 Litres</option>
                        <option value="80">80 Litres</option>
                        <option value="100">100 Litres</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="schedule">Delivery Time</label>
                    <select id="schedule" required>
                        <option value="now">Deliver Now</option>
                        <option value="1hour">In 1 Hour</option>
                        <option value="2hours">In 2 Hours</option>
                        <option value="today">Later Today</option>
                        <option value="tomorrow">Tomorrow</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="phone">Mobile Number</label>
                    <input type="tel" id="phone" placeholder="024XXXXXXX or 055XXXXXXX" required>
                </div>

                <button type="submit" class="btn btn-primary" style="width: 100%;">
                    <i class="fas fa-mobile-alt"></i>
                    Proceed to Payment (Mobile Money)
                </button>
            </form>
        </div>
    </div>

    <!-- Emergency Modal -->
    <div class="emergency-modal" id="emergencyModal">
        <div class="emergency-content">
            <div class="emergency-icon">
                <i class="fas fa-exclamation-triangle"></i>
            </div>
            <div class="emergency-title">Emergency Assistance</div>
            <p style="margin-bottom: 1.5rem; color: #6b7280;">Professional help is on the way. Stay safe and keep your mobile phone nearby.</p>
            <div class="emergency-actions">
                <button class="btn btn-danger" onclick="callEmergency()">
                    <i class="fas fa-phone"></i>
                    Call Emergency: 999
                </button>
                <button class="btn btn-success" onclick="closeEmergency()">
                    <i class="fas fa-check"></i>
                    Help is Coming
                </button>
            </div>
        </div>
    </div>

    <!-- Tracking Modal -->
    <div class="tracking-modal" id="trackingModal">
        <div class="tracking-content">
            <div class="modal-header">
                <h2 class="modal-title">Track Order #FE123456</h2>
                <button class="close-btn" onclick="closeTracking()">&times;</button>
            </div>

            <div class="tracking-steps">
                <div class="tracking-step completed">
                    <div class="step-indicator">
                        <i class="fas fa-check"></i>
                    </div>
                    <div class="step-info">
                        <h4>Order Confirmed</h4>
                        <p>Your fuel order has been confirmed</p>
                    </div>
                </div>
                <div class="tracking-step completed">
                    <div class="step-indicator">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="step-info">
                        <h4>Driver Assigned</h4>
                        <p>Professional driver is heading to you</p>
                    </div>
                </div>
                <div class="tracking-step active">
                    <div class="step-indicator">
                        <i class="fas fa-truck"></i>
                    </div>
                    <div class="step-info">
                        <h4>En Route</h4>
                        <p>Driver is on the way to your location</p>
                    </div>
                </div>
                <div class="tracking-step">
                    <div class="step-indicator">
                        <i class="fas fa-gas-pump"></i>
                    </div>
                    <div class="step-info">
                        <h4>Delivered</h4>
                        <p>Fuel delivery completed</p>
                    </div>
                </div>
            </div>

            <div class="driver-info">
                <div class="driver-avatar">KM</div>
                <div class="driver-details">
                    <h4>Kwame Mensah</h4>
                    <p>Professional Driver ‚Ä¢ 4.8 ‚≠ê</p>
                    <p>üìû +233 24 123 4567</p>
                </div>
            </div>

            <div class="eta-display">
                <div class="eta-time" id="etaTime">18 mins</div>
                <div class="eta-label">Estimated Arrival</div>
            </div>

            <button class="btn btn-primary" style="width: 100%;" onclick="callDriver()">
                <i class="fas fa-phone"></i>
                Call Driver
            </button>
        </div>
    </div>

    <!-- Loading Spinner -->
    <div class="loading-spinner" id="loadingSpinner">
        <div class="spinner-content">
            <div class="spinner"></div>
            <p>Processing your request...</p>
        </div>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification"></div>

    <script>
        let selectedFuel = null;
        let currentOrder = null;
        let etaInterval = null;
        let API_BASE_URL = 'https://fuel-order-api.onrender.com';



        // Select fuel type
        function selectFuel(fuelType) {
            document.querySelectorAll(".fuel-option").forEach(opt => opt.classList.remove("selected"));
            event.target.closest(".fuel-option").classList.add("selected");
            selectedFuel = fuelType;
        }

        // Handle order form
        document.getElementById("fuelOrderForm").addEventListener("submit", async function (e) {
            e.preventDefault();

            if (!selectedFuel) {
                showNotification("Please select a fuel type", "error");
                return;
            }

            const phone = document.getElementById("phone").value;
            if (!phone.match(/^(\+233|0)(20|23|24|26|27|28|50|54|55|56|57|59|53)\d{7}$/)) {
                showNotification("Invalid Ghana mobile number", "error");
                return;
            }

            const orderData = {
                phone_number: phone,
                email: "customer@example.com", // Replace with actual user email
                delivery_address: document.getElementById("location").value,
                fuel_type: selectedFuel,
                quantity: parseInt(document.getElementById("quantity").value),
                delivery_time: document.getElementById("schedule").value
            };

            try {
                showLoading();

                const res = await fetch(`${API_BASE_URL}/orders`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(orderData)
                });

                const data = await res.json();
                hideLoading();

                if (!res.ok) throw new Error(data.detail || "Failed to create order");

                currentOrder = data.order;
                window.location.href = data.payment_url; // Redirect to Paystack

            } catch (err) {
                hideLoading();
                showNotification(`Order failed: ${err.message}`, "error");
            }
        });

        // Verify payment
        async function checkPaymentStatus(reference) {
            try {
                const res = await fetch(`${API_BASE_URL}/verify-payment/${reference}`);
                const data = await res.json();
                return data.status === "success";
            } catch (err) {
                console.error("Payment verification failed:", err);
                return false;
            }
        }

        // Utility
        function showLoading() {
            document.getElementById("loadingSpinner").classList.add("active");
        }
        function hideLoading() {
            document.getElementById("loadingSpinner").classList.remove("active");
        }
        function showNotification(msg, type = "success") {
            const n = document.getElementById("notification");
            n.textContent = msg;
            n.className = `notification ${type} show`;
            setTimeout(() => n.classList.remove("show"), 4000);
        }


        // Ghana-specific map data
        const accraCoords = { lat: 5.6037, lng: -0.1870 };
        const ghanaFuelStations = [
            {
                name: "Shell Ghana",
                position: { lat: 5.6037, lng: -0.1870 },
                address: "Ring Road Central, Accra",
                prices: { regular: 12.50, premium: 14.80, diesel: 13.20 },
                icon: "https://maps.google.com/mapfiles/ms/icons/red-dot.png"
            },
            {
                name: "GOIL Station", 
                position: { lat: 5.6508, lng: -0.1467 },
                address: "Labadi Road, East Legon",
                prices: { regular: 12.30, premium: 14.60, diesel: 13.00 },
                icon: "https://maps.google.com/mapfiles/ms/icons/blue-dot.png"
            },
            {
                name: "Total Energies",
                position: { lat: 5.5600, lng: -0.1960 },
                address: "Osu Oxford Street, Accra",
                prices: { regular: 12.70, premium: 15.00, diesel: 13.40 },
                icon: "https://maps.google.com/mapfiles/ms/icons/green-dot.png"
            },
            {
                name: "Allied Oil",
                position: { lat: 5.6400, lng: -0.0500 },
                address: "Spintex Road, Baatsonaa", 
                prices: { regular: 12.40, premium: 14.70, diesel: 13.10 },
                icon: "https://maps.google.com/mapfiles/ms/icons/orange-dot.png"
            },
            {
                name: "Star Oil",
                position: { lat: 5.6700, lng: 0.0167 },
                address: "Tema Station, Community 25",
                prices: { regular: 12.60, premium: 14.90, diesel: 13.30 },
                icon: "https://maps.google.com/mapfiles/ms/icons/purple-dot.png"
            },
            {
                name: "Frimps Oil",
                position: { lat: 5.6500, lng: -0.1800 },
                address: "North Legon, University of Ghana",
                prices: { regular: 12.45, premium: 14.75, diesel: 13.15 },
                icon: "https://maps.google.com/mapfiles/ms/icons/yellow-dot.png"
            }
        ];

        let map;
        let userMarker;
        let deliveryMarker;
        let trafficLayer;
        let isTrafficVisible = false;
        let userPosition = accraCoords;

        // Initialize Google Map
        function initMap() {
            map = new google.maps.Map(document.getElementById("ghanaMap"), {
                zoom: 12,
                center: accraCoords,
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                styles: [
                    {
                        featureType: "all",
                        elementType: "geometry.fill",
                        stylers: [{ saturation: -40 }, { lightness: 25 }]
                    },
                    {
                        featureType: "water",
                        elementType: "all", 
                        stylers: [{ color: "#1e40af" }]
                    },
                    {
                        featureType: "road",
                        elementType: "all",
                        stylers: [{ saturation: -30 }, { lightness: 30 }]
                    }
                ],
                mapTypeControl: false,
                streetViewControl: false,
                fullscreenControl: false,
                zoomControl: true,
                zoomControlOptions: {
                    position: google.maps.ControlPosition.LEFT_BOTTOM
                }
            });

            // Add traffic layer
            trafficLayer = new google.maps.TrafficLayer();

            // Add fuel station markers
            addFuelStationMarkers();
            
            // Add user location marker
            addUserMarker();

            // Try to get user's real location
            getCurrentLocationForMap();
        }

        function addFuelStationMarkers() {
            ghanaFuelStations.forEach(station => {
                const marker = new google.maps.Marker({
                    position: station.position,
                    map: map,
                    title: station.name,
                    icon: {
                        url: station.icon,
                        scaledSize: new google.maps.Size(32, 32)
                    }
                });

                const infoWindow = new google.maps.InfoWindow({
                    content: `
                        <div style="padding: 10px; color: #1f2937;">
                            <h3 style="margin: 0 0 8px 0; color: #1e40af;">${station.name}</h3>
                            <p style="margin: 0 0 8px 0; font-size: 14px;">${station.address}</p>
                            <div style="display: flex; gap: 8px; font-size: 12px;">
                                <span style="background: #10b981; color: white; padding: 2px 6px; border-radius: 4px;">
                                    Regular: ‚Çµ${station.prices.regular.toFixed(2)}
                                </span>
                                <span style="background: #f59e0b; color: white; padding: 2px 6px; border-radius: 4px;">
                                    Premium: ‚Çµ${station.prices.premium.toFixed(2)}
                                </span>
                                <span style="background: #6b7280; color: white; padding: 2px 6px; border-radius: 4px;">
                                    Diesel: ‚Çµ${station.prices.diesel.toFixed(2)}
                                </span>
                            </div>
                            <button onclick="navigateToStation('${station.name}')" 
                                    style="margin-top: 8px; background: #1e40af; color: white; border: none; padding: 6px 12px; border-radius: 6px; cursor: pointer; font-size: 12px;">
                                Get Directions
                            </button>
                        </div>
                    `
                });

                marker.addListener('click', () => {
                    infoWindow.open(map, marker);
                });
            });
        }

        function addUserMarker() {
            userMarker = new google.maps.Marker({
                position: userPosition,
                map: map,
                title: "Your Location",
                icon: {
                    url: 'https://maps.google.com/mapfiles/ms/icons/blue.png',
                    scaledSize: new google.maps.Size(40, 40)
                }
            });

            const userInfoWindow = new google.maps.InfoWindow({
                content: `
                    <div style="padding: 10px; color: #1f2937;">
                        <h3 style="margin: 0 0 8px 0; color: #1e40af;">Your Location</h3>
                        <p style="margin: 0; font-size: 14px;">Current position in Greater Accra</p>
                    </div>
                `
            });

            userMarker.addListener('click', () => {
                userInfoWindow.open(map, userMarker);
            });
        }

        function getCurrentLocationForMap() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        const pos = {
                            lat: position.coords.latitude,
                            lng: position.coords.longitude
                        };
                        
                        // Check if user is in Ghana (approximate bounds)
                        if (pos.lat >= 4.5 && pos.lat <= 11.5 && pos.lng >= -3.5 && pos.lng <= 1.5) {
                            userPosition = pos;
                            userMarker.setPosition(userPosition);
                            map.setCenter(userPosition);
                            showNotification('Location updated in Ghana! üá¨üá≠', 'success');
                        } else {
                            showNotification('Location detected outside Ghana. Using Accra as default.', 'error');
                        }
                    },
                    () => {
                        showNotification('Location access denied. Using Accra, Ghana as default.', 'error');
                    }
                );
            }
        }

        function centerOnUser() {
            if (map && userPosition) {
                map.setCenter(userPosition);
                map.setZoom(15);
                showNotification('Centered on your location', 'success');
            } else {
                showNotification('Getting your location in Ghana...', 'success');
                getCurrentLocationForMap();
            }
        }

        function toggleTraffic() {
            if (map) {
                if (isTrafficVisible) {
                    trafficLayer.setMap(null);
                    isTrafficVisible = false;
                    showNotification('Traffic layer hidden', 'success');
                } else {
                    trafficLayer.setMap(map);
                    isTrafficVisible = true;
                    showNotification('Traffic layer shown for Accra roads', 'success');
                }
            } else {
                showNotification('Map is loading... Please wait', 'success');
            }
        }

        function navigateToStation(stationName) {
            const station = ghanaFuelStations.find(s => s.name === stationName);
            if (station) {
                const url = `https://www.google.com/maps/dir/?api=1&destination=${station.position.lat},${station.position.lng}&travelmode=driving`;
                window.open(url, '_blank');
                showNotification(`Opening directions to ${stationName}`, 'success');
            }
        }

        function addDeliveryTracking(driverPosition) {
            if (deliveryMarker) {
                deliveryMarker.setMap(null);
            }

            deliveryMarker = new google.maps.Marker({
                position: driverPosition,
                map: map,
                title: "Delivery Driver",
                icon: {
                    url: 'https://maps.google.com/mapfiles/ms/icons/truck.png',
                    scaledSize: new google.maps.Size(40, 40)
                },
                animation: google.maps.Animation.BOUNCE
            });

            // Create delivery route
            const directionsService = new google.maps.DirectionsService();
            const directionsRenderer = new google.maps.DirectionsRenderer({
                suppressMarkers: true,
                polylineOptions: {
                    strokeColor: '#f59e0b',
                    strokeWeight: 4,
                    strokeOpacity: 0.8
                }
            });

            directionsRenderer.setMap(map);

            directionsService.route({
                origin: driverPosition,
                destination: userPosition,
                travelMode: google.maps.TravelMode.DRIVING,
                avoidTolls: true
            }, (result, status) => {
                if (status === 'OK') {
                    directionsRenderer.setDirections(result);
                }
            });

            // Center map to show both markers
            const bounds = new google.maps.LatLngBounds();
            bounds.extend(userPosition);
            bounds.extend(driverPosition);
            map.fitBounds(bounds);
        }

        function simulateDeliveryMovement() {
            // Simulate driver movement for demo
            const driverStart = { lat: 5.5800, lng: -0.2200 }; // Somewhere in Accra
            addDeliveryTracking(driverStart);
            
            let step = 0;
            const totalSteps = 10;
            
            const moveDriver = setInterval(() => {
                step++;
                const progress = step / totalSteps;
                
                const newLat = driverStart.lat + (userPosition.lat - driverStart.lat) * progress;
                const newLng = driverStart.lng + (userPosition.lng - driverStart.lng) * progress;
                
                deliveryMarker.setPosition({ lat: newLat, lng: newLng });
                
                if (step >= totalSteps) {
                    clearInterval(moveDriver);
                    deliveryMarker.setAnimation(null);
                    showNotification('Driver has arrived! üöö', 'success');
                }
            }, 2000);
        }

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(function() {
                document.getElementById('splashScreen').classList.add('hidden');
                setTimeout(function() {
                    document.getElementById('mobileApp').classList.add('active');
                    showNotification('Akwaaba to Fuelease Ghana! üá¨üá≠', 'success');
                    startRealTimeUpdates();
                }, 500);
            }, 4000); // Show splash for 4 seconds
        });

        // Navigation
        function setActiveTab(tab) {
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            event.target.closest('.nav-item').classList.add('active');
            
            switch(tab) {
                case 'fuel':
                    showFuelOrder();
                    break;
                case 'track':
                    showTracking();
                    break;
                case 'emergency':
                    showEmergency();
                    break;
                default:
                    // Home tab - scroll to top
                    document.querySelector('.mobile-content').scrollTop = 0;
            }
        }

        // Fuel Order Functions
        function showFuelOrder() {
            document.getElementById('fuelOrderModal').classList.add('active');
            getCurrentLocation();
        }

        function closeFuelOrder() {
            document.getElementById('fuelOrderModal').classList.remove('active');
        }

        function selectFuel(fuelType) {
            document.querySelectorAll('.fuel-option').forEach(option => option.classList.remove('selected'));
            event.target.closest('.fuel-option').classList.add('selected');
            selectedFuel = fuelType;
            const fuelNames = {
                regular: 'Regular',
                premium: 'Premium',
                diesel: 'Diesel'
            };
            showNotification(`${fuelNames[fuelType]} fuel selected`, 'success');
        }

        function getCurrentLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    // Simulate Ghana location
                    const ghanaLocations = [
                        'East Legon, Accra',
                        'Osu, Accra',
                        'Dansoman, Accra',
                        'Tema, Greater Accra',
                        'Kasoa, Central Region',
                        'Madina, Accra'
                    ];
                    const randomLocation = ghanaLocations[Math.floor(Math.random() * ghanaLocations.length)];
                    document.getElementById('location').value = randomLocation;
                    showNotification('Location detected in Greater Accra', 'success');
                }, function(error) {
                    showNotification('Location access denied. Please enter your address in Ghana.', 'error');
                });
            }
        }

        // Order Processing
        document.getElementById('fuelOrderForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (!selectedFuel) {
                showNotification('Please select a fuel type', 'error');
                return;
            }

            // Validate Ghana phone number
            const phone = document.getElementById('phone').value;
            if (!phone.match(/^(\+233|0)(20|23|24|26|27|28|50|54|55|56|57|59|53)\d{7}$/)) {
                showNotification('Please enter a valid Ghana mobile number', 'error');
                return;
            }

            processFuelOrder();
        });

        async function processFuelOrder() {
            closeFuelOrder();
            showLoading();

            const formData = {
                phone_number: document.getElementById('phone').value,
                email: 'customer@example.com', 
                delivery_address: document.getElementById('location').value,
                fuel_type: selectedFuel,
                quantity: parseInt(document.getElementById('quantity').value),
                delivery_time: document.getElementById('schedule').value
            };

            try {
                const response = await fetch(`${API_BASE_URL}/orders`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData)
                });

                const data = await response.json();
                
                if (response.ok) {
                    currentOrder = data.order;
                    // Redirect to Paystack payment page
                    window.location.href = data.payment_url;
                } else {
                    throw new Error(data.detail || 'Order creation failed');
                }
            } catch (error) {
                hideLoading();
                showNotification(`Order failed: ${error.message}`, 'error');
            }
        }


        async function checkPaymentStatus(reference) {
            try {
                const response = await fetch(`${API_BASE_URL}/verify-payment/${reference}`);
                const data = await response.json();
                return data.status === 'success';
            } catch (error) {
                console.error('Payment verification failed:', error);
                return false;
            }
        }

        async function loadFuelPrices() {
            try {
                const response = await fetch(`${API_BASE_URL}/fuel-prices`);
                const prices = await response.json();
                
                // Update UI with current prices
                document.querySelectorAll('[data-fuel="regular"] .price').forEach(el => {
                    el.textContent = `‚Çµ${prices.regular.toFixed(2)}/L`;
                });
                document.querySelectorAll('[data-fuel="premium"] .price').forEach(el => {
                    el.textContent = `‚Çµ${prices.premium.toFixed(2)}/L`;
                });
                document.querySelectorAll('[data-fuel="diesel"] .price').forEach(el => {
                    el.textContent = `‚Çµ${prices.diesel.toFixed(2)}/L`;
                });
            } catch (error) {
                console.error('Failed to load fuel prices:', error);
            }
        }

        
        loadFuelPrices();



        // Service Requests
        function requestService(service) {
            const services = {
                'towing': 'Emergency Towing',
                'jumpstart': 'Jump Start Service',
                'lockout': 'Lockout Assistance',
                'tire': 'Tyre Service',
                'repair': 'Minor Repair',
                'winch': 'Winch Out Service'
            };

            showLoading();
            setTimeout(() => {
                hideLoading();
                showNotification(`${services[service]} requested in Ghana. Help is on the way!`, 'success');
                showTracking();
            }, 2500);
        }

        // Tracking Functions
        function showTracking() {
            document.getElementById('trackingModal').classList.add('active');
        }

        function closeTracking() {
            document.getElementById('trackingModal').classList.remove('active');
            if (etaInterval) {
                clearInterval(etaInterval);
            }
        }

        function startEtaCountdown() {
            let eta = 18; // Longer ETA for Ghana traffic conditions
            
            // Start delivery tracking on map
            simulateDeliveryMovement();
            
            etaInterval = setInterval(() => {
                eta = Math.max(0, eta - 1);
                document.getElementById('etaTime').textContent = eta > 0 ? eta + ' mins' : 'Delivered!';
                
                if (eta === 0) {
                    clearInterval(etaInterval);
                    completeOrder();
                }
            }, 20000); // Update every 20 seconds for demo
        }

        function completeOrder() {
            // Update tracking steps
            document.querySelectorAll('.tracking-step').forEach(step => {
                step.classList.add('completed');
                step.classList.remove('active');
            });
            
            showNotification('Order completed successfully! Medaase! üá¨üá≠', 'success');
        }

        // Emergency Functions
        function showEmergency() {
            document.getElementById('emergencyModal').classList.add('active');
        }

        function closeEmergency() {
            document.getElementById('emergencyModal').classList.remove('active');
        }

        function callEmergency() {
            // Ghana emergency numbers
            const emergencyNumbers = ['999', '191', '192', '193'];
            window.location.href = 'tel:999';
        }

        function callDriver() {
            window.location.href = 'tel:+233241234567';
        }

        // Station Selection
        function selectStation(stationName) {
            showNotification(`Selected ${stationName} for directions in Accra`, 'success');
            
            // Find station and center map on it
            const station = ghanaFuelStations.find(s => s.name === stationName);
            if (station && map) {
                map.setCenter(station.position);
                map.setZoom(16);
                
                // Open directions
                setTimeout(() => {
                    navigateToStation(stationName);
                }, 1000);
            }
        }

        // Utility Functions
        function showLoading() {
            document.getElementById('loadingSpinner').classList.add('active');
        }

        function hideLoading() {
            document.getElementById('loadingSpinner').classList.remove('active');
        }

        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type}`;
            notification.classList.add('show');

            setTimeout(() => {
                notification.classList.remove('show');
            }, 4000);
        }

        function showProfile() {
            showNotification('Profile section coming soon! üöÄ', 'success');
        }

        // Real-time updates
        function startRealTimeUpdates() {
            // Update fuel prices every 45 seconds (Ghana market volatility)
            setInterval(() => {
                updateFuelPrices();
            }, 45000);

            // Update time every minute
            setInterval(() => {
                updateTime();
            }, 60000);
        }

        function updateFuelPrices() {
            const priceElements = document.querySelectorAll('.price, .price-tag');
            priceElements.forEach(element => {
                const currentText = element.textContent;
                const priceMatch = currentText.match(/‚Çµ([\d.]+)/);
                if (priceMatch) {
                    const currentPrice = parseFloat(priceMatch[1]);
                    const variation = (Math.random() - 0.5) * 0.3; // ¬±15 pesewas variation
                    const newPrice = Math.max(10.00, currentPrice + variation);
                    const newText = currentText.replace(/‚Çµ[\d.]+/, `‚Çµ${newPrice.toFixed(2)}`);
                    element.textContent = newText;
                }
            });
        }

        function updateTime() {
            const now = new Date();
            // Convert to Ghana time (GMT)
            const ghanaTime = new Date(now.toLocaleString("en-US", {timeZone: "Africa/Accra"}));
            const timeString = ghanaTime.getHours().toString().padStart(2, '0') + ':' + 
                              ghanaTime.getMinutes().toString().padStart(2, '0');
            document.querySelector('.status-left span').textContent = timeString;
        }

        // Touch feedback for mobile
        document.addEventListener('touchstart', function() {}, {passive: true});

        // Ghana-specific welcome messages
        const welcomeMessages = [
            'Akwaaba to Fuelease Ghana! üá¨üá≠',
            'Welcome to Ghana\'s premier fuel service!',
            'Your trusted partner across Greater Accra',
            'Professional service, Ghana style!'
        ];

        // Initialize with Ghana context
        setTimeout(() => {
            const randomMessage = welcomeMessages[Math.floor(Math.random() * welcomeMessages.length)];
            showNotification(randomMessage, 'success');
        }, 5000);

        // Initialize map when page loads
        window.addEventListener('load', function() {
            // Add map loading placeholder until Google Maps loads
            const mapElement = document.getElementById('ghanaMap');
            if (mapElement) {
                mapElement.innerHTML = `
                    <div class="map-loading">
                        <i class="fas fa-map-marked-alt"></i>
                        <span>Loading Ghana Map...</span>
                    </div>
                `;
            }
        });
    </script>
    
    <!-- Google Maps JavaScript API -->
    <!-- Note: Replace YOUR_API_KEY with your actual Google Maps API key -->
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap&libraries=places"></script>
    
    <script>
        // Fallback map initialization if Google Maps fails to load
        setTimeout(() => {
            const mapElement = document.getElementById('ghanaMap');
            if (mapElement && mapElement.innerHTML.includes('Loading Ghana Map')) {
                mapElement.innerHTML = `
                    <div class="map-loading">
                        <i class="fas fa-map-marked-alt"></i>
                        <span>Interactive map will load with valid API key</span>
                        <p style="font-size: 0.9rem; opacity: 0.8; margin-top: 0.5rem;">
                            Replace YOUR_API_KEY in the script tag with your Google Maps API key
                        </p>
                    </div>
                `;
            }
        }, 5000);
    </script>
</body>
</html>